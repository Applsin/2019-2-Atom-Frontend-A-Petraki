{"version":3,"sources":["styles/FormInput.module.css","styles/Profile.module.css","styles/MessageItem.module.css","styles/DialogueItem.module.css","styles/ChatHeader.module.css","styles/MessageForm.module.css","styles/MainForm.module.css","styles/DialoguesHeader.module.css","styles/DialogueForm.module.css","styles/CreateDialogueButton.module.css","utils/serviceWorker.js","components/DialoguesHeader.jsx","components/MyContext.Context.js","components/DialogueItem.jsx","components/CreateDialogueButton.jsx","components/DialogueForm.jsx","components/ChatHeader.jsx","lib/voiceRecord.js","components/FormInput.jsx","lib/geo.js","components/MessageItem.jsx","components/MessageForm.jsx","components/Profile.jsx","lib/recordStream.js","components/MainForm.jsx","index.jsx"],"names":["module","exports","Boolean","window","location","hostname","match","DialoguesHeader","className","styles","header","menuBurger","messenger","searchButton","MyContext","React","createContext","DialogueItem","props","chat","formattedTime","Date","lastMessage","time","Consumer","value","dialogue","to","id","style","textDecoration","avatar","wrapper","color","text","name","title","toLocaleString","hour","minute","info","message","content","status","CreateDialogueButton","createHandler","onClick","createDialogueButton","DialogueForm","chats","dialogues","length","empty","forEach","dialogueItem","push","dialogueList","bind","ChatHeader","details","clickBack","backButton","chatInfo","senderInfo","settingsButton","mediaRecorder","a","callbackStart","callbackEnd","callbackSuccess","start","chunks","addEventListener","blob","Blob","type","mimeType","audioURL","URL","createObjectURL","event","data","FormInput","input","useRef","messageHandler","requireRecorder","dragFiles","setDragFiles","useState","dropOutStyle","setDropOutStyle","attachments","setAttachments","sendButtonType","setSendButtonType","recording","setRecording","attachmentsBoxStyles","list","img","onSubmit","current","trim","removeFile","i","attachmentsList","splice","draggedAttachments","path","file","recordStatus","height","map","addition","Attachment","key","remove","container","formInput","attachButton","onChange","target","onKeyPress","charCode","ref","placeholder","SendButton","cancel","callback","stop","endRecord","record","then","media","startRecord","catch","console","log","submit","dropOut","dropOutContainer","click","attachItem","attachImage","callbackError","additionsList","files","toobig","size","slice","imageUploader","multiple","display","navigator","geolocation","getCurrentPosition","enableHighAccuracy","maximumAge","timeout","geo","position","coords","latitude","longitude","response","attachGeo","additionsBox","additionsBoxUl","additionStyle","backgroundRepeat","backgroundPosition","backgroundImage","image","inputButton","micButton","sendButton","cancelButton","MessageItem","inner","isAttached","attachmentsToRender","attachment","attachmentItem","messageWrap","messageItem","timestamp","isPlaying","setPlayStatus","audio","staticMap","addStyle","backgroundSize","width","href","rel","alt","src","statusStyle","audioStop","audioPlay","pause","play","audioStatus","onEnded","MessageForm","messages","dragActive","setDragActive","messagesToRender","element","onDrop","preventDefault","stopPropagation","dataTransfer","onDragOver","onDragLeave","messageForm","dragNDropArea","activeZone","accept","closeDialogue","messagesList","inputForm","state","Profile","headerContainer","back","edit","profile","form","formLabel","recordStream","constrains","mediaDevices","getUserMedia","stream","MediaRecorder","Error","MainForm","storage","parseStorage","chatCounter","currentDialogue","frameStyles","JSON","parse","localStorage","getItem","this","setState","err","chatId","animationName","chatAppearance","frame","chatDisappear","Object","keys","index","chatTimestamp","amISender","FormData","append","Attr","fetch","method","body","setLastMessage","setItem","stringify","prompt","chatMsgs","is_group","host","chatMessages","pathname","test","parseInt","openDialogue","openProfile","pageRouter","Provider","Component","render","component","document","getElementById","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.47988a41.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"FormInput_container__1mGjo\",\"formInput\":\"FormInput_formInput__1CDjc\",\"attachButton\":\"FormInput_attachButton__2ixoS\",\"inputButton\":\"FormInput_inputButton__2UzLN\",\"dropOut\":\"FormInput_dropOut__2fyVW\",\"dropOutContainer\":\"FormInput_dropOutContainer__2ygt-\",\"attachItem\":\"FormInput_attachItem__1vaHt\",\"attachImage\":\"FormInput_attachImage__21_M-\",\"attachGeo\":\"FormInput_attachGeo__1PPvS\",\"sendButton\":\"FormInput_sendButton__22Gjc\",\"micButton\":\"FormInput_micButton__11YK-\",\"cancelButton\":\"FormInput_cancelButton__bJpbb\",\"additionsBox\":\"FormInput_additionsBox__3dD64\",\"additionsBoxUl\":\"FormInput_additionsBoxUl__1fz_N\",\"image\":\"FormInput_image__J1Lbo\",\"imageName\":\"FormInput_imageName__3ZK77\",\"remove\":\"FormInput_remove__Ij8bW\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"Profile_wrapper__l1aal\",\"headerContainer\":\"Profile_headerContainer__3OGTq\",\"header\":\"Profile_header__3KTnW\",\"back\":\"Profile_back__3AkOO\",\"send\":\"Profile_send__jcmmV\",\"avatar\":\"Profile_avatar__3XqJk\",\"profile\":\"Profile_profile__3y5_H\",\"edit\":\"Profile_edit__1-Gcp\",\"form\":\"Profile_form__3xqPC\",\"formLabel\":\"Profile_formLabel__26nnp\",\"inputForm\":\"Profile_inputForm__2G2h8\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"messageWrap\":\"MessageItem_messageWrap__udvmP\",\"messageItem\":\"MessageItem_messageItem__3ZnNZ\",\"message\":\"MessageItem_message__1157w\",\"timestamp\":\"MessageItem_timestamp__30gC_\",\"attachments\":\"MessageItem_attachments__15Y8W\",\"attachment\":\"MessageItem_attachment__3ze9n\",\"geolocation\":\"MessageItem_geolocation__2Inih\",\"image\":\"MessageItem_image__1mB4Z\",\"audioStatus\":\"MessageItem_audioStatus__2GF6X\",\"audioPlay\":\"MessageItem_audioPlay__1bod5\",\"audioStop\":\"MessageItem_audioStop__1g6U6\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dialogue\":\"DialogueItem_dialogue__2rBXY\",\"avatar\":\"DialogueItem_avatar__9XARq\",\"wrapper\":\"DialogueItem_wrapper__3lnRQ\",\"text\":\"DialogueItem_text__1WkGt\",\"name\":\"DialogueItem_name__1rMup\",\"time\":\"DialogueItem_time__31wNC\",\"info\":\"DialogueItem_info__WVGza\",\"message\":\"DialogueItem_message__3mEch\",\"status\":\"DialogueItem_status__1zUFk\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"ChatHeader_header__wtf1f\",\"backButton\":\"ChatHeader_backButton__2kZvs\",\"chatInfo\":\"ChatHeader_chatInfo__1Q3tD\",\"avatar\":\"ChatHeader_avatar__W2O5Y\",\"senderInfo\":\"ChatHeader_senderInfo__1gAM0\",\"searchButton\":\"ChatHeader_searchButton__30ZIJ\",\"settingsButton\":\"ChatHeader_settingsButton__SLkJ7\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"messageForm\":\"MessageForm_messageForm__8PdEl\",\"messagesList\":\"MessageForm_messagesList__2eLXd\",\"header\":\"MessageForm_header__10-FU\",\"chat\":\"MessageForm_chat__31JWU\",\"inputForm\":\"MessageForm_inputForm__Q4V5O\",\"dragNDropArea\":\"MessageForm_dragNDropArea__3m60l\",\"activeZone\":\"MessageForm_activeZone__3Ogxo\",\"dragNDropImage\":\"MessageForm_dragNDropImage__3N1tB\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"MainForm_container__1Ac2B\",\"chatDisappear\":\"MainForm_chatDisappear__2crCV\",\"chatAppearance\":\"MainForm_chatAppearance__2FfsV\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"DialoguesHeader_header__1SGyL\",\"menuBurger\":\"DialoguesHeader_menuBurger__icB5p\",\"messenger\":\"DialoguesHeader_messenger__36R73\",\"searchButton\":\"DialoguesHeader_searchButton__1bBEn\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dialogues\":\"DialogueForm_dialogues__1D1Xl\",\"dialogueList\":\"DialogueForm_dialogueList__QR6qv\",\"empty\":\"DialogueForm_empty__ygZ6X\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"createDialogueButton\":\"CreateDialogueButton_createDialogueButton__i92_8\",\"pencil\":\"CreateDialogueButton_pencil__2KVsW\"};","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost'\n    // [::1] is the IPv6 localhost address.\n    || window.location.hostname === '[::1]'\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    || window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/),\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service '\n              + 'worker. To learn more, visit http://bit.ly/CRA-PWA',\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all '\n                  + 'tabs for this page are closed. See http://bit.ly/CRA-PWA.',\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (response.status === 404 || (contentType != null && contentType.indexOf('javascript') === -1)) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log('No internet connection found. App is running in offline mode.');\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then((registration) => {\n      registration.unregister();\n    });\n  }\n}\n","/* eslint-disable no-unused-vars */\nimport React from 'react';\nimport styles from '../styles/DialoguesHeader.module.css';\n\n\n// eslint-disable-next-line import/prefer-default-export\nexport function DialoguesHeader() {\n  return (\n        <div className={styles.header}>\n            <div className={styles.menuBurger} />\n            <div className={styles.messenger}>Messenger</div>\n            <div className={styles.searchButton} />\n        </div>\n  );\n}\n","import React from 'react';\n\nconst MyContext = React.createContext(null);\n\nexport default MyContext;\n","/* eslint-disable no-unused-vars */\n/* eslint-disable import/prefer-default-export */\n// eslint-disable-next-line no-unused-vars\nimport React from 'react';\nimport { Link } from 'react-router-dom';\nimport styles from '../styles/DialogueItem.module.css';\nimport MyContext from './MyContext.Context';\n\n\nexport function DialogueItem(props) {\n  const { chat } = props;\n  const formattedTime = new Date(chat.lastMessage.time);\n  return (\n        <MyContext.Consumer>\n            {(value) => (\n                <div className={styles.dialogue}>\n                    <Link to={`/profile/${chat.id}`} style={{ textDecoration: 'none' }}>\n                        <div className={styles.avatar} />\n                    </Link>\n                    <div className={styles.wrapper}>\n                        <Link to={`/chat/${chat.id}`} style={{ textDecoration: 'none', color: 'unset' }}>\n                            <div className={styles.text}>\n                                <div className={styles.name}>{chat.title}</div>\n                                <div className={styles.time}>{formattedTime.toLocaleString('ru', {\n                                  hour: 'numeric',\n                                  minute: 'numeric',\n                                })}</div>\n                            </div>\n                            <div className={styles.info}>\n                                <div className={styles.message}>{chat.lastMessage.content || 'Attachment'}</div>\n                                <div className={styles.status}>{chat.lastMessage.status}</div>\n                            </div>\n                        </Link>\n                    </div>\n                </div>\n            )}\n        </MyContext.Consumer>\n  );\n}\n","import React from 'react';\nimport styles from '../styles/CreateDialogueButton.module.css';\n\n\nexport function CreateDialogueButton(props) {\n  const { createHandler } = props;\n  return (\n        <button\n            onClick={createHandler} className={styles.createDialogueButton}\n        />\n  );\n}\n","/* eslint-disable no-unused-vars */\n/* eslint-disable import/named */\nimport React from 'react';\nimport styles from '../styles/DialogueForm.module.css';\nimport { DialoguesHeader } from './DialoguesHeader';\nimport { DialogueItem } from './DialogueItem';\nimport { CreateDialogueButton } from './CreateDialogueButton';\nimport MyContext from './MyContext.Context';\n\n// eslint-disable-next-line import/prefer-default-export\nexport function DialogueForm(props) {\n  const { chats } = props;\n\n  let dialogues = [];\n  if (chats.length === 0) {\n    dialogues = <div className={styles.empty}>No messages yet</div>;\n  } else {\n    chats.forEach((chat) => {\n      const dialogueItem = <DialogueItem chat={chat}/>;\n      dialogues.push(dialogueItem);\n    });\n  }\n\n  return (\n        <div className={styles.dialogues}>\n            <DialoguesHeader />\n            <div className={styles.dialogueList}>\n                {dialogues}\n            </div>\n            <MyContext.Consumer>\n                {(value) => (\n                    <CreateDialogueButton createHandler={value.createHandler.bind(value)}/>\n                )}\n            </MyContext.Consumer>\n        </div>\n  );\n}\n","/* eslint-disable no-unused-vars */\nimport React from 'react';\nimport { Link } from 'react-router-dom';\nimport styles from '../styles/ChatHeader.module.css';\n\n\n// eslint-disable-next-line import/prefer-default-export\nexport function ChatHeader(props) {\n  const { details, clickBack } = props;\n  return (\n        <div className={styles.header}>\n            <Link to={'/'}>\n                <div onClick={clickBack} className={styles.backButton} />\n            </Link>\n            <div className={styles.chatInfo}>\n                <Link to={`/profile/${details.id}`}>\n                    <div className={styles.avatar} />\n                </Link>\n                    <div className={styles.senderInfo}>\n                    <div>{details.title}</div>\n                    <div>last seen at 12:00</div>\n                </div>\n            </div>\n            <div className={styles.searchButton} />\n            <div className={styles.settingsButton} />\n        </div>\n  );\n}\n","export async function startRecord(mediaRecorder,\n  callbackStart = null,\n  callbackEnd = null,\n  callbackSuccess = null) {\n  if (mediaRecorder) {\n    mediaRecorder.start();\n\n    if (callbackStart) { callbackStart(); }\n\n    let chunks = [];\n    mediaRecorder.addEventListener('stop', () => {\n      const blob = new Blob(chunks, { type: mediaRecorder.mimeType });\n      const audioURL = URL.createObjectURL(blob);\n      chunks = [];\n\n      if (callbackSuccess) { callbackSuccess(audioURL, blob); }\n    });\n\n    mediaRecorder.addEventListener('dataavailable', (event) => {\n      chunks.push(event.data);\n    });\n  } else if (callbackEnd) { callbackEnd(); }\n}\n\nexport function endRecord(mediaRecorder, callback = null) {\n  if (mediaRecorder) {\n    mediaRecorder.stop();\n  }\n\n  if (callback) { callback(); }\n}\n","import React from 'react';\nimport styles from '../styles/FormInput.module.css';\nimport { geo } from '../lib/geo';\nimport { startRecord, endRecord } from '../lib/voiceRecord';\n\nexport function FormInput(props) {\n  const input = React.useRef(null);\n  const {\n    messageHandler,\n    requireRecorder,\n    mediaRecorder,\n  } = props;\n  const [dragFiles, setDragFiles] = props.dragFiles;\n  const [dropOutStyle, setDropOutStyle] = React.useState(null);\n  const [attachments, setAttachments] = React.useState(null);\n  const [sendButtonType, setSendButtonType] = React.useState('mic');\n  const [recording, setRecording] = React.useState(false);\n  let attachmentsBoxStyles = null;\n  let list = null;\n  const img = React.useRef(null);\n\n  const onSubmit = () => {\n    const value = input.current.value.trim();\n    if (attachments || value !== '') {\n      input.current.value = '';\n      messageHandler(value, null, null, attachments);\n    }\n    setAttachments(null);\n  };\n\n  const onKeyPress = (event) => {\n    if (event.charCode === 13) {\n      onSubmit();\n    }\n  };\n\n  const removeFile = (i) => {\n    const attachmentsList = attachments.list;\n    attachmentsList.splice(i, 1);\n    if (attachmentsList.length) {\n      setAttachments({\n        type: attachments.type,\n        list: attachmentsList,\n      });\n    } else {\n      setAttachments(null);\n    }\n  };\n\n  if (dragFiles) {\n    const draggedAttachments = attachments || {};\n    draggedAttachments.type = 'image';\n    draggedAttachments.list = [\n      {\n        name: dragFiles.name,\n        path: window.URL.createObjectURL(dragFiles),\n        file: dragFiles,\n      },\n    ];\n\n    if (draggedAttachments !== attachments) {\n      setAttachments(draggedAttachments);\n    }\n\n    setDragFiles(null);\n  }\n\n\n  const recordStatus = (status) => {\n    if (recording !== status) {\n      setRecording(status);\n    }\n  };\n\n  \n  if (recording && sendButtonType !== 'cancel') { setSendButtonType('cancel'); }\n  else if ((!recording && (input.current && input.current.value !== '')) || attachments) {\n    if (sendButtonType !== 'send') { setSendButtonType('send'); }\n  } else if (!recording && sendButtonType !== 'mic') { setSendButtonType('mic'); }\n\n  const imageUploader = (event, callbackSuccess, callbackError = null) => {\n    let additionsList = event.target.files;\n    if (!additionsList.length) {\n      return false;\n    }\n\n    let toobig = false;\n    additionsList = [...additionsList].map((file) => {\n      if (file.size > 8 * 1024 * 1024) { toobig = true; }\n      return {\n        name: file.name,\n        path: window.URL.createObjectURL(file),\n        file,\n      };\n    });\n\n    if (toobig) {\n      if (callbackError) { callbackError('Its too big!!!'); }\n      return false;\n    }\n\n    if (attachments) {\n      additionsList = [...attachments.list, ...additionsList];\n    }\n\n    if (additionsList.length > 10) {\n      additionsList = additionsList.slice(0, 10);\n    }\n\n    callbackSuccess(additionsList);\n\n    return false;\n  };\n\n  if (attachments) {\n    attachmentsBoxStyles = {\n      height: '100px',\n    };\n\n    list = attachments.list.map((addition, i) => (\n        <Attachment\n          key={i}\n          remove={removeFile.bind(null, i)}\n          type={attachments.type}\n          addition={addition}\n        />\n    ));\n  }\n\n  return (\n    <div className={styles.container}>\n        <div className={styles.formInput}>\n          <div\n            onClick={() => {\n              !dropOutStyle && setDropOutStyle({\n                height: '50px',\n              });\n              dropOutStyle && setDropOutStyle(null);\n            }}\n            className={styles.attachButton} />\n\n          <input\n            onChange={(event) => {\n              if (event.target.value.length > 0) {\n                setSendButtonType('send');\n              } else if (event.target.value.length === 0) {\n                setSendButtonType('mic');\n              }\n            }}\n            onKeyPress={onKeyPress}\n            ref={input}\n            placeholder='Enter message...' />\n\n          <SendButton\n            cancel={() => {\n              endRecord(mediaRecorder, () => {\n                recordStatus(false);\n              });\n            }}\n            record={() => {\n              requireRecorder().then((media) => {\n\n                startRecord(media, () => {\n                  recordStatus(true);\n                }, () => {\n                  recordStatus(false);\n                },\n                (audioURL, blob) => {\n                  setAttachments({\n                    type: 'audio',\n                    list: [\n                      {\n                        path: audioURL,\n                        file: blob,\n                      },\n                    ],\n                  });\n                });\n              }).catch(console.log);\n            }}\n\n            submit={onSubmit}\n            type={sendButtonType}/>\n\n          <div className={styles.dropOut} style={dropOutStyle}>\n            <div className={styles.dropOutContainer}>\n              <div\n                onClick={() => {\n                  setDropOutStyle(null);\n                  img.current.click();\n                }}\n                className={`${styles.attachItem} ${styles.attachImage}`}>\n                <input\n                  onChange={(event) => {\n                    imageUploader(event, (attachmentsList) => {\n                      setAttachments({\n                        type: 'image',\n                        list: attachmentsList,\n                      });\n                    });\n                  }}\n                  ref={img}\n                  type='file'\n                  multiple style={{ display: 'none' }} />\n              </div>\n\n              <div\n                onClick={() => {\n                  setDropOutStyle(null);\n                  geo((position) => {\n                    const { latitude, longitude } = position.coords;\n                    const response = `https://yandex.ru/maps/?ll=${longitude}%2C${latitude}&z=15`;\n                    setAttachments({\n                      type: 'geolocation',\n                      list: [\n                        {\n                          path: response,\n                          latitude,\n                          longitude,\n                        },\n                      ],\n                    });\n                  });\n                }}\n                className={`${styles.attachItem} ${styles.attachGeo}`}></div>\n            </div>\n          </div>\n      </div>\n      <div style={attachmentsBoxStyles} className={styles.additionsBox}>\n        <ul className={styles.additionsBoxUl}>{list}</ul>\n      </div>\n    </div>\n  );\n}\n\nfunction Attachment(props) {\n  const {\n    remove,\n    type,\n    addition,\n  } = props;\n\n  const additionStyle = {\n    backgroundRepeat: 'no-repeat',\n    backgroundPosition: 'center center',\n    height: '50px',\n    \n  };\n  switch (type) {\n    case 'audio':\n      additionStyle.backgroundImage = 'url(https://image.flaticon.com/icons/svg/117/117114.svg)';\n      break;\n    case 'image':\n      additionStyle.backgroundImage = `url(${addition.path})`;\n      break;\n    case 'geolocation':\n      additionStyle.backgroundImage = 'url(https://image.flaticon.com/icons/svg/854/854878.svg)';\n      break;\n    default:\n      break;\n  }\n\n  return (\n    <li>\n      <div onClick={remove} className={styles.remove}>\n        x\n      </div>\n      <div style={additionStyle} className={styles.image} />\n    </li>\n  );\n}\n\nfunction SendButton(props) {\n  const {\n    submit,\n    record,\n    cancel,\n    type,\n  } = props;\n\n  let content = null;\n\n  switch (type) {\n    case 'mic':\n      content = <div\n        onClick={record}\n        className={`${styles.inputButton} ${styles.micButton}`}\n      />;\n      break;\n    case 'send':\n      content = <div\n        onClick={submit}\n        className={`${styles.inputButton} ${styles.sendButton}`}\n      />;\n      break;\n    case 'cancel':\n      content = <div\n        onClick={cancel}\n        className={`${styles.inputButton} ${styles.cancelButton}`}\n      />;\n      break;\n    default:\n      break;\n  }\n\n  return content;\n}","/* eslint-disable no-console */\n\nexport function geo(callbackSuccess, callbackError = null) {\n  if ('geolocation' in navigator) {\n    const geoOptions = {\n      enableHighAccuracy: true,\n      maximumAge: 30000,\n      timeout: 27000,\n    };\n\n    navigator.geolocation.getCurrentPosition(\n      callbackSuccess,\n      callbackError,\n      geoOptions,\n    );\n  } else if (callbackError) { callbackError('Permisition denied'); }\n}\n","import React from 'react';\nimport styles from '../styles/MessageItem.module.css';\n\n\nexport function MessageItem(props) {\n  const { content, time } = props.inner;\n  const formattedTime = new Date(time);\n  let isAttached = false;\n  const attachmentsToRender = [];\n  if ('attachments' in props.inner) {\n    const { attachments } = props.inner;\n    isAttached = true;\n    attachments.list.forEach((attachment) => {\n      const attachmentItem = <Attachment type={attachments.type} attachment={attachment}/>;\n      attachmentsToRender.push(attachmentItem);\n    });\n  }\n  return (\n        <div className={styles.messageWrap}>\n            <div className={styles.messageItem}>\n                <div className={styles.inner}>\n                  <div className={styles.message}>\n                    {content}\n                  </div>\n                  <div className={styles.attachments}>\n                    {isAttached && attachmentsToRender}\n                  </div>\n                </div>\n                <div className={styles.timestamp}>{formattedTime.toLocaleString('ru', {\n                  hour: 'numeric',\n                  minute: 'numeric',\n                })}</div>\n            </div>\n        </div>\n  );\n}\n\nfunction Attachment(props) {\n  const {\n    name,\n    path,\n  } = props.attachment;\n  const { type } = props;\n  const [isPlaying, setPlayStatus] = React.useState(false);\n  const audio = React.useRef(null);\n  let content = null;\n\n  switch (type) {\n    case 'geolocation':\n      const {\n        latitude,\n        longitude,\n      } = props.attachment;\n      const staticMap = `https://static-maps.yandex.ru/1.x/?ll=${longitude},${latitude}&spn=0.016457,0.00619&l=map&size=300,300`;\n      const addStyle = {\n        backgroundRepeat: 'no-repeat',\n        backgroundSize: 'cover',\n        backgroundPosition: 'center center',\n        height: '300px',\n        width: '300px',\n      };\n      addStyle.backgroundImage = `url(${staticMap})`;\n      content = (\n        <div>\n          <a href={path} target=\"_blank\" rel=\"noopener noreferrer\">\n            <div style={addStyle} className={`${styles.attachment}`} />\n          </a>\n        </div>\n      );\n      break;\n    case 'image':\n      content = <img alt={name} src={path} className={styles.image} />;\n      break;\n    case 'audio':\n      const play = () => {\n        if (!isPlaying) {\n          audio.current.play();\n          setPlayStatus(true);\n        } else {\n          audio.current.pause();\n          setPlayStatus(false);\n        }\n      };\n\n      const stop = () => {\n        setPlayStatus(false);\n      };\n\n      const statusStyle = !isPlaying ? styles.audioPlay : styles.audioStop;\n\n\n      content = (\n            <div onClick={play}>\n              <div className={styles.attachment}>\n                <div className={`${styles.audioStatus} ${statusStyle}`}/>\n              </div>\n              <audio onEnded={stop} ref={audio} src={path}/>\n            </div>\n      );\n      break;\n    default:\n      break;\n  }\n\n  return content;\n}","import React from 'react';\nimport styles from '../styles/MessageForm.module.css';\nimport { ChatHeader } from './ChatHeader';\nimport { FormInput } from './FormInput';\nimport { MessageItem } from './MessageItem';\nimport MyContext from './MyContext.Context';\n\nexport function MessageForm(props) {\n    const { messages, details, style } = props;\n    const [dragActive, setDragActive] = React.useState(false);\n    const [dragFiles, setDragFiles] = React.useState(null);\n  \n    const dragOver = (event) => {\n      event.preventDefault();\n      event.stopPropagation();\n      setDragActive(true);\n    };\n  \n    const dragLeave = () => {\n      setDragActive(false);\n    };\n  \n    const drop = (event) => {\n      event.preventDefault();\n      event.stopPropagation();\n      setDragActive(false);\n      setDragFiles(event.dataTransfer.files[0]);\n    };\n  \n    if (details === null) {\n      return '';\n    }\n    const messagesToRender = [];\n    messages.forEach((element) => {\n      const messageItem = <MessageItem inner={element} />;\n      messagesToRender.push(messageItem);\n    });\n    return (\n          <div\n              onDrop={drop}\n              onDragOver={dragOver}\n              onDragLeave={dragLeave}\n              style={style}\n              className={styles.messageForm}>\n              <input className={`${styles.dragNDropArea} ${dragActive && styles.activeZone}`} type=\"file\" accept=\"image/*\">\n                  {/* <div className={styles.dragNDropImage} /> */}\n              </input>\n              <MyContext.Consumer>\n                  {(value) => (\n                      <ChatHeader\n                          details={details}\n                          clickBack={value.closeDialogue.bind(value, 'MessageForm')}\n                      />\n                  )}\n              </MyContext.Consumer>\n              <div className={styles.chat}>\n                  <div className={styles.messagesList}>\n                      {messagesToRender}\n                  </div>\n              </div>\n  \n              <div className={styles.inputForm}>\n                  <MyContext.Consumer>\n                      {(value) => (\n                          <FormInput\n                              requireRecorder={value.requireRecorder.bind(value)}\n                              mediaRecorder={value.state.mediaRecorder}\n                              messageHandler={value.messageHandler.bind(value)}\n                              dragFiles={[dragFiles, setDragFiles]}\n                          />\n                      )}\n                  </MyContext.Consumer>\n              </div>\n          </div>\n    );\n  }","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport styles from '../styles/Profile.module.css';\n\nexport function Profile(props) {\n  const { style } = props;\n\n  return (\n    <div className={styles.wrapper} style={style}>\n        <div className={styles.headerContainer}>\n            <div className={styles.header}>\n                <Link to={'/'} style={{ textDecoration: 'none', color: 'unset' }}>\n                    <div className={styles.back} />\n                </Link>\n                <div className={styles.edit}>Edit Profile</div>\n                <div className={styles.submit} />\n            </div>\n        </div>\n        <div className={styles.profile}>\n            <div className={styles.avatar} />\n            <div className={styles.form}>\n                <div className={styles.formLabel}>Full name</div>\n                <input className={styles.inputForm} placeholder='Name Placeholder'/>\n            </div>\n            <div className={styles.form}>\n                <div className={styles.formLabel}>Username</div>\n                <input className={styles.inputForm} placeholder='@test'/>\n            </div>\n            <div className={styles.form}>\n                <div className={styles.formLabel}>Info</div>\n                <input className={styles.inputForm} placeholder='Info Placeholder'/>\n            </div>\n        </div>\n    </div>\n  );\n}","export async function recordStream() {\n  let mediaRecorder = null;\n\n  try {\n    const constrains = { audio: true };\n    const stream = await navigator.mediaDevices.getUserMedia(constrains);\n    mediaRecorder = new MediaRecorder(stream);\n  } catch (err) {\n    throw new Error(err);\n  }\n\n  return mediaRecorder;\n}\n","/* eslint-disable no-console */\n/* eslint-disable no-case-declarations */\n/* eslint-disable no-unused-vars */\n/* eslint-disable import/prefer-default-export */\n/* eslint-disable import/named */\n/* eslint-disable no-alert */\nimport React from 'react';\nimport { DialogueForm } from './DialogueForm';\nimport { MessageForm } from './MessageForm';\nimport { Profile } from './Profile';\nimport MyContext from './MyContext.Context';\nimport { recordStream } from '../lib/recordStream';\nimport styles from '../styles/MainForm.module.css';\n\n\nexport class MainForm extends React.Component {\n  constructor(props) {\n    super(props);\n    const storage = this.parseStorage();\n    this.state = {\n      chats: storage.chats,\n      messages: storage.messages,\n      chatCounter: storage.chatCounter,\n      currentDialogue: null,\n      mediaRecorder: null,\n      frameStyles: {\n        MessageForm: null,\n        Profile: null,\n      },\n    };\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  parseStorage() {\n    const storage = {\n      chats: JSON.parse(localStorage.getItem('chats')),\n      messages: JSON.parse(localStorage.getItem('messages')),\n      chatCounter: JSON.parse(localStorage.getItem('chatCounter')),\n    };\n    if (!storage.chats) {\n      storage.chats = [];\n      storage.messages = {};\n      storage.chatCounter = 0;\n    }\n    return storage;\n  }\n\n  async requireRecorder() {\n    if (this.state.mediaRecorder) {\n      return this.state.mediaRecorder;\n    }\n\n    return recordStream().then((value) => {\n      this.setState({ mediaRecorder: value });\n      return value;\n    }).catch((err) => {\n      throw new Error(err);\n    });\n  }\n\n  openDialogue(chatId) {\n    const { state } = this;\n    state.frameStyles.MessageForm = {\n      animationName: styles.chatAppearance,\n    };\n    state.currentDialogue = chatId;\n    if (state !== this.state) {\n      this.setState(state);\n    }\n  }\n\n  closeDialogue(frame = null) {\n    const { state } = this;\n    if (!frame) {\n      Object.keys(state.frameStyles).forEach((index) => {\n        state.frameStyles[index] = {\n          animationName: styles.chatDisappear,\n        };\n      });\n    } else {\n      state.frameStyles[frame] = {\n        animationName: styles.chatDisappear,\n      };\n    }\n    if (state !== this.state) {\n      this.setState(state);\n    }\n  }\n\n  messageHandler(value, chatTimestamp = null, chatId = null, attachments = null) {\n    let { currentDialogue, messages } = this.state;\n    let isAttached = false;\n    if (!messages) {\n      messages = {};\n    }\n    if (chatId) {\n      currentDialogue = chatId;\n      messages[currentDialogue - 1] = [];\n    }\n    const message = {\n      id: 'test',\n      content: value,\n      amISender: true,\n      time: chatTimestamp || new Date(),\n      status: 'sent',\n    };\n    if (attachments) {\n      message.attachments = attachments;\n      isAttached = true;\n\n      const data = new FormData();\n      data.append(Attr.type, attachments.file);\n\n      fetch('https://tt-front.now.sh/upload', {\n        method: 'POST',\n        body: data,\n      }).then(() => {\n        // pass\n      }).catch(console.log);\n    }\n    messages[currentDialogue - 1].push(message);\n    this.setState(messages);\n    if (!chatId) {\n      this.setLastMessage();\n    }\n\n    localStorage.setItem('messages', JSON.stringify(messages));\n  }\n\n  createHandler() {\n    // eslint-disable-next-line prefer-const\n    let { chats, chatCounter } = this.state;\n    const name = prompt(\"Enter person's name\");\n    const text = prompt('Write a message');\n    chatCounter += 1;\n    this.messageHandler(text, new Date(), chatCounter);\n    const chatMsgs = this.state.messages[chatCounter - 1];\n    chats.push({\n      id: chatCounter,\n      title: name,\n      is_group: false,\n      host: 'Vladimir Carpa',\n      lastMessage: chatMsgs[chatMsgs.length - 1],\n\n    });\n    this.setState({ chats, chatCounter });\n    this.setLastMessage(chatCounter);\n    localStorage.setItem('chats', JSON.stringify(chats));\n    localStorage.setItem('chatCounter', JSON.stringify(chatCounter));\n  }\n\n  setLastMessage(chatId = null) {\n    const { messages, chats } = this.state;\n    let { currentDialogue } = this.state;\n    if (chatId) {\n      currentDialogue = chatId;\n    }\n    const chatMessages = messages[currentDialogue - 1];\n    chats[currentDialogue - 1].lastMessage = chatMessages[chatMessages.length - 1];\n    this.setState(chats);\n    localStorage.setItem('chats', JSON.stringify(chats));\n  }\n\n  openProfile() {\n    const { state } = this;\n    state.frameStyles.Profile = {\n      animationName: styles.chatAppearance,\n    };\n    if (state !== this.state) {\n      this.setState(state);\n    }\n  }\n\n  pageRouter() {\n    const path = this.props.location.pathname;\n    switch (true) {\n      case /chat\\/\\d\\/?$/.test(path):\n        const chatId = parseInt(path.match(/\\d+/), 10);\n        this.openDialogue(chatId);\n        break;\n      case /profile\\/\\d\\/?$/.test(path):\n        this.openProfile();\n        break;\n      default:\n        this.closeDialogue();\n        break;\n    }\n  }\n\n  render() {\n    this.pageRouter();\n    const { state } = this;\n    return (\n      <MyContext.Provider value={this}>\n          <div className={styles.container}>\n            <DialogueForm\n              chats={state.chats}\n            />\n            <MessageForm\n                style={state.frameStyles.MessageForm}\n                details={state.currentDialogue && state.chats[state.currentDialogue - 1]}\n                messages={state.currentDialogue\n                    && state.messages[state.currentDialogue - 1]}\n            />\n            <Profile style={state.frameStyles.Profile}/>\n          </div>\n      </MyContext.Provider>\n    );\n  }\n}\n","import React from 'react';\nimport { render } from 'react-dom';\nimport './styles/globalStyles.css';\nimport { BrowserRouter, Route } from 'react-router-dom';\nimport * as serviceWorker from './utils/serviceWorker';\nimport { MainForm } from './components/MainForm'\nimport './index.css';\n\nrender(\n  <BrowserRouter>\n    <Route path='/' component={MainForm} />\n  </BrowserRouter>,\n  document.getElementById('root'),\n);\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}